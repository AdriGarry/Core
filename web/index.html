<!DOCTYPE html>
<html data-ng-app="odiUI">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<title>OdiUI</title>
	<meta name="description" content="Odi's UI to interact !" />
	<meta name="author" content="Adrien GARRY">
	<meta name="robots" content="noindex,nofollow">
	<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

	<link rel="stylesheet" href="css/lib/font-awesome.min.css" media="all" />
	<link rel="stylesheet" href="css/lib/angular-material.min.css" media="all" />
	<!-- <link rel="stylesheet" href="css/lib/picker.css" media="all" /> -->
	<link rel="stylesheet" href="css/odiUI.css" media="all" />
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700,400italic">

<!-- build:js js/odiUI.min.js -->
	<script src="js/lib/angular.min.js"></script>
	<script src="js/lib/angular-material.min.js"></script>
	<script src="js/lib/angular-animate.min.js"></script>
	<script src="js/lib/angular-aria.min.js"></script>
<!-- endbuild -->

	<script src="js/app.js"></script>
	<script src="js/controllers.js"></script>
	<script src="js/services.js"></script>
	<script src="js/models.js"></script>
	<script src="js/components.js"></script>
	<script src="js/Tile.js"></script>

	<!--<script src="js/lib/angular-long-press.min.js"></script>-->
	<!-- <script src="js/lib/picker.js"></script> -->
	<!--<script src="js/directives.js"></script>-->

	<link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
	<link rel="icon" type="image/png" href="/favicon-194x194.png" sizes="194x194">
	<link rel="icon" type="image/png" href="/android-chrome-192x192.png" sizes="192x192">
	<link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
	<link rel="manifest" href="/manifest.json">
	<meta name="apple-mobile-web-app-title" content="Odi UI">
	<meta name="application-name" content="Odi UI">
	<meta name="theme-color" content="#2c3e50">
	<style type="text/css">
		body>.loading{
			position:fixed;
			width:100%;
			height:100%;
			background:rgba(0,0,0,0.5);
			cursor:wait;
			z-index:1000000;
		}
		body>.loading i{
			font-size:10em;
			margin:30vh;/*60%*/
			margin-left:39%;
			color:#ccc;
		}
		@media(max-width:768px){
			body>.loading i{
				margin-left:30%;
			}
		}
	</style>
</head>
<body data-ng-controller="UIController" data-ng-mousemove="showFabButtons()" data-scroll>
	<!-- <div class="loading">
		<i class="fa fa-spin fa-cog"></i>
	</div> -->
	<md-toolbar class="toolbar" data-ng-class="dashboard.loading ? 'md-warn' : ''">
		<div class="md-toolbar-tools">
			<img src="img/odi.jpg" alt="Odi's face" data-ng-hide="connexionLost" class="odiFace" 
				ng-class="dashboard.tileList.mode.value.mode == 'Sleep' ? 'sleep' : ''" data-ng-click="reloadUI()">
			<img data-ng-class="connexionLost ? 'visible' : 'hidden'" data-ng-click="reloadUI()" src="img/snow.gif" alt="Connexion lost" class="odiFace connexionLost">
			<!--data-ng-show="connexionLost"-->
			<h1 data-ng-dblclick="irda && action({label: 'Restart Odi', url: '/odi'})">
				<span data-ng-hide="irda">O</span><span data-ng-show="irda">&Oslash;</span>di UI
				<sup class="version" title="version">{{dashboard.runningData.version.value}}&nbsp;</sup>
			</h1>
			<span flex></span>
			<i class="debug fa fa-circle" data-ng-if="dashboard.debug" title="DEBUG mode"></i>&nbsp;

			<md-button class="md-icon-button" data-ng-click="toggleMenu()" title="Menu" aria-label="Menu">
				<i data-ng-class="{'fa-rotate-90':menuOpen}" class="fa fa-2x fa-lg fa-bars ng-slide"></i>&nbsp;
			</md-button>
		</div>
		<md-progress-linear md-mode="query" data-ng-show="dashboard.refreshing"></md-progress-linear>
		<!--data-ng-disabled="dashboard.refreshing"-->
	</md-toolbar>

	<md-sidenav class="md-sidenav-left" md-component-id="logs" md-whiteframe="4">
		<div class="logs" data-ng-dblclick="refreshLog()">
			<i class="debugLog fa fa-circle" data-ng-if="dashboard.debug" title="DEBUG mode"></i>
			<ul>
				<li data-ng-repeat="logLine in logData track by $index" data-ng-bind-html="toHtml(logLine | formatLog)"></li>
				<a id="bottomLogs"></a>
			</ul>
			<md-progress-circular md-diameter="150" data-ng-hide="logData"></md-progress-circular>
		</div>
		<div class="tools">
			<md-button class="md-fab md-warn" data-ng-click="action({label: 'Sleep', url: '/sleep'})" data-ng-show="irda"
				title="Sleep Odi" aria-label="Sleep Odi"><i class="fa fa-2x fa-moon-o"></i></md-button>
			<md-button class="md-fab md-warn" data-ng-click="action({label: 'Restart Odi', url: '/odi'})" data-ng-show="irda"
				title="Restart Odi" aria-label="Restart Odi"><i class="fa fa-2x fa-flash"></i></md-button>
			<md-button class="md-fab md-warn" data-ng-click="hideLogs()" data-ng-hide="irda" title="Hide Logs"
				aria-label="Hide Logs">
			<i class="fa fa-2x fa-arrow-left"></i></md-button>
			<md-button class="md-fab md-warn" data-ng-click="toggleMenu()" title="Toggle Menu"
				aria-label="Toggle Menu"><i class="fa fa-2x fa-bars"></i></md-button>
		</div>
	</md-sidenav>

	<md-sidenav class="md-sidenav-right" md-component-id="menu" md-whiteframe="1">
		<div layout="row" class="menu">
				<md-list flex>
					<md-list-item>
						<md-button data-ng-click="toggleGrant($event)" data-ng-class="{admin:irda}" class="adminBtn center" title="{{irda? 'Log out':'Log in'}}">
							<i data-ng-class="irda" class="fa fa-sign-in"></i>
							<i data-ng-if="!irda" class="fa fa-user"></i>
							<i data-ng-if="irda" class="fa fa-user-secret"></i>
							<i data-ng-class="irda" class="fa fa-sign-out"></i>
						</md-button>
					</md-list-item>
					<md-divider></md-divider>

					<md-list-item>
						<div flex>Auto refresh on scroll</div>
						<div flex>
							<md-switch class="switch md-primary" aria-label="Dashboard auto refresh" title="Dashboard auto refresh" tabindex="0" type="checkbox" role="checkbox" data-ng-model="dashboard.autoRefresh"></md-switch>
						</div>
					</md-list-item>
					<md-divider></md-divider>

					<md-list-item>
						<div flex>Debug</div>
						<div flex>
							<md-switch class="switch md-primary" aria-label="Debug mode" title="Debug mode" tabindex="0" type="checkbox" role="checkbox" data-ng-model="dashboard.debug"  data-ng-click="irda && toggleDebugMode()" data-ng-disabled="!irda"></md-switch>
						</div>
					</md-list-item>
					<md-divider></md-divider>

					<md-subheader>Volume&nbsp;&nbsp;<i>{{master}}</i></md-subheader>
					<md-list-item title="Volume">
						<md-slider-container ng-disabled="!irda">
							<md-slider flex data-ng-model="master" data-md-discrete md-horizontal step="10" class="md-primary"
								data-ng-readonly="!irda" title="Volume" aria-label="Volume"></md-slider>
						</md-slider-container>
					</md-list-item>
					<md-divider></md-divider>

					<md-list-item data-ng-click="showLogs()" title="Show console">
						<div flex>Show logs</div>
						<div flex><i class="fa fa-lg fa-2x fa-terminal"></i></div>
					</md-list-item>
					<md-divider></md-divider>
					<md-list-item data-ng-click="reloadUI()" title="Reload UI">
						<div flex>Reload UI</div>
						<div flex><i class="fa fa-lg fa-2x fa-repeat"></i></div>
					</md-list-item>
				</md-list>
			<!-- </div> -->
		</div>
	</md-sidenav>

	<div layout-align="top center">

		<md-content flex layout-padding>
			<div class="dashboard ng-slide">
				<tts data="dashboard.runningData.mode" data-access="irda" flex="3"></tts>
				<mode data="dashboard.runningData.mode" data-access="irda" flex="1"></mode>
				<volume data="dashboard.runningData.volume" data-access="irda" flex="1"></volume>
				<alarms data="dashboard.runningData.alarms" data-access="irda" flex="1"></alarms>
				<cpu data="dashboard.runningData.cpu" data-access="irda" flex="2" data-odi-state="dashboard.odiState"></cpu>
				<voicemail data="dashboard.runningData.voicemail" data-access="irda" flex="1" data-odi-state="dashboard.odiState"></voicemail>
				<jukebox data="dashboard.runningData.jukebox" data-access="irda" flex="1" data-odi-state="dashboard.odiState"></jukebox>
				<exclamation data="dashboard.runningData.exclamation" data-access="irda" flex="1" data-odi-state="dashboard.odiState"></exclamation>
				<timer data="dashboard.runningData.timer" data-access="irda" flex="1" data-odi-state="dashboard.odiState"></timer>
				<!--<date data="dashboard.runningData.date" flex="1" data-odi-state="dashboard.odiState"></date>-->
				<russia data="dashboard.runningData.russia" data-access="irda" flex="1" data-odi-state="dashboard.odiState"></russia>
				<weather data="dashboard.runningData.weather" data-access="irda" flex="1" data-odi-state="dashboard.odiState"></weather>
				<time data="dashboard.runningData.time" data-access="irda" flex="1" data-odi-state="dashboard.odiState"></time>
				<party data="dashboard.runningData.party" data-access="irda" flex="1" data-odi-state="dashboard.odiState"></party>
				<idea data="dashboard.runningData.ideas" data-access="irda" flex="1" data-odi-state="dashboard.odiState"></idea>
				<system data="dashboard.runningData.system" data-access="irda" flex="1"></system>
				<logs data="dashboard.runningData.logs" data-access="irda" flex="1"></logs>
				<about data="dashboard.runningData.about" flex="2"></about>
			</div>

			<md-button data-ng-click="showLogs()" data-ng-show="irda" data-ng-class="[{'active':fabButtonsVisible}]" class="md-fab md-warn logButton ng-slide" title="Logs" aria-label="Logs">
			<!--data-ng-if="irda"-->
				<i class="fa fa-2x fa-quote-right"></i>
			</md-button>
			<!-- // -> TENTER d'enlever les class md-hue-2 -->
			<md-button data-ng-click="action({label: 'Mute', url: '/mute'})" data-ng-class="[{'active':fabButtonsVisible}]" class="md-fab md-primary muteButton ng-slide"
			title="Mute Odi" aria-label="Mute Odi">
				<i class="fa fa-lg fa-bell-slash"></i>
			</md-button>
			<!--<md-button data-ng-click="action({label: 'Mute', url: '/mute'})" class="md-fab md-primary md-hue-2 md-mini muteButton"
			title="Mute Odi" aria-label="Mute Odi">
				<i class="fa fa-bell-slash-o"></i>
			</md-button>-->

			<!--<div data-ng-include src="'templates/dashboard.html'" data-ng-hide="loading" data-ng-class="loading ? '' : 'ng-slide'"></div>-->
		</md-content>
	</div>

	<footer data-ng-hide="loading">
		<p><a href="http://adrigarry.com" target="_blank" title="Adrien Garry">adrigarry.com</a></p>
	</footer>
</body>
</html>